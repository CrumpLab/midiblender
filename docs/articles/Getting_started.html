<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midiblender">
<title>Getting started with MIDI mangling in R • midiblender</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with MIDI mangling in R">
<meta property="og:description" content="midiblender">
<meta property="og:image" content="https://crumplab.com/midiblender/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-C7SNDLCKT8"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C7SNDLCKT8');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midiblender</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Getting_started.html">Getting started with MIDI mangling in R</a>
    <a class="dropdown-item" href="../articles/midi_construct.html">Midi data frame constructors with dplyr</a>
    <a class="dropdown-item" href="../articles/mangling_with_matrices.html">Mangling with Matrices</a>
    <a class="dropdown-item" href="../articles/midi_mangle.html">Basic MIDI mangling functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CrumpLab/midiblender">
    <span class="fa fa-lg fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started with MIDI mangling in R</h1>
                        <h4 data-toc-skip class="author">Matt Crump</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CrumpLab/midiblender/tree/main/vignettes/Getting_started.Rmd" class="external-link"><code>vignettes/Getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>Getting_started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">midiblender</span><span class="op">)</span></span></code></pre></div>
<p>The basic goal of this package is to mangle MIDI files for various
reasons, such as randomizing notes, analyzing MIDI statistical
structure, and generating or otherwise transforming MIDI sequences using
probabilistic and/or controlled sources.</p>
<p>I’m very new to this and I’m writing this code as part of a process
to figure out how to accomplish different mangling goals that I might
come up with.</p>
<p>There is some hesitation to write a getting started document like
this because the code could easily change and then I would have to
rewrite this (which I may do). My more immediate goals are to try things
out, and roughly document as I go.</p>
<p>This getting started document covers high level data-wrangling steps,
and should provide some helpful breadcrumbs for getting starting with
mangling MIDI in R. I do use some {midiblender} functions in here, but
my plan is to show their use cases in other vignettes covering specific
mangling approaches.</p>
<div class="section level2">
<h2 id="importing-mangling-exporting">Importing, Mangling, Exporting<a class="anchor" aria-label="anchor" href="#importing-mangling-exporting"></a>
</h2>
<p>The workflow is:</p>
<ol style="list-style-type: decimal">
<li>Import the midi file into an R data.frame</li>
<li>Mangle the MIDI in R</li>
<li>Construct a new valid midi file, and export it (and even play it
with <a href="https://www.fluidsynth.org" class="external-link">fluidsynth</a> for immediate
gratification)</li>
</ol>
<p>The import and export are mostly calls to <a href="https://urswilke.github.io/pyramidi/" class="external-link">pyramidi</a>. The mangling
part is mostly done here in {midiblender}.</p>
<div class="section level3">
<h3 id="importing">Importing<a class="anchor" aria-label="anchor" href="#importing"></a>
</h3>
<p>I’m relying on <a href="https://urswilke.github.io/pyramidi/" class="external-link">pyramidi</a> and python
packages wrapped by pyramidi (<a href="https://pypi.org/project/miditapyr/" class="external-link">miditapyr</a> and <a href="https://mido.readthedocs.io/en/stable/" class="external-link">mido</a>) to import and
export MIDI. I recommend checking out the documentation for those
packages.</p>
<p>Here’s a quick example of importing a MIDI file with
{midiblender}.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">midi_objects</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/midi_to_object.html">midi_to_object</a></span><span class="op">(</span><span class="st">"all_overworld.mid"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list2env.html" class="external-link">list2env</a></span><span class="op">(</span><span class="va">midi_objects</span>, <span class="va">.GlobalEnv</span><span class="op">)</span> <span class="co"># add to global environment</span></span>
<span><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span></code></pre></div>
<p><code><a href="../reference/midi_to_object.html">midi_to_object()</a></code> is a helper function to wrap common
calls in pyramidi. The following code chunk shows the major steps inside
the function</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#import midi using miditapyr</span></span>
<span><span class="va">miditapyr_object</span> <span class="op">&lt;-</span> <span class="fu">pyramidi</span><span class="fu">::</span><span class="va"><a href="https://urswilke.github.io/pyramidi/reference/miditapyr.html" class="external-link">miditapyr</a></span><span class="op">$</span><span class="fu">MidiFrames</span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#import using mido</span></span>
<span><span class="va">mido_object</span> <span class="op">&lt;-</span> <span class="fu">pyramidi</span><span class="fu">::</span><span class="va"><a href="https://urswilke.github.io/pyramidi/reference/mido.html" class="external-link">mido</a></span><span class="op">$</span><span class="fu">MidiFile</span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># to R dataframe</span></span>
<span><span class="va">message_list_df</span> <span class="op">&lt;-</span> <span class="fu">pyramidi</span><span class="fu">::</span><span class="va"><a href="https://urswilke.github.io/pyramidi/reference/miditapyr.html" class="external-link">miditapyr</a></span><span class="op">$</span><span class="fu">frame_midi</span><span class="op">(</span><span class="va">mido_object</span><span class="op">)</span></span>
<span><span class="va">ticks_per_beat</span> <span class="op">&lt;-</span> <span class="va">mido_object</span><span class="op">$</span><span class="va">ticks_per_beat</span></span>
<span></span>
<span><span class="co"># unnest the dataframe</span></span>
<span><span class="va">midi_df</span> <span class="op">&lt;-</span> <span class="fu">pyramidi</span><span class="fu">::</span><span class="va"><a href="https://urswilke.github.io/pyramidi/reference/miditapyr.html" class="external-link">miditapyr</a></span><span class="op">$</span><span class="fu">unnest_midi</span><span class="op">(</span><span class="va">message_list_df</span><span class="op">)</span></span></code></pre></div>
<p>All of these objects are contained in the <code>midi_objects</code>
list, and <code>list2env(midi_objects, .GlobalEnv)</code> bumps them to
the global environment.</p>
<p>There is a lot going on inside the objects miditapyr and mido
objects. They contain MIDI file information in various formats, methods,
and interfaces to python through reticulate.</p>
<p>For importing, the important aspect for me is the
<code>midi_df</code> object produced by
<code>pyramidi::miditapyr$unnest_midi()</code>. This one contains the
midi file as an R data.frame!</p>
<p>For example, here are the top 10 rows.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">midi_df</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="3%">
<col width="8%">
<col width="14%">
<col width="2%">
<col width="5%">
<col width="7%">
<col width="10%">
<col width="16%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="3%">
<col width="2%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">i_track</th>
<th align="left">meta</th>
<th align="left">type</th>
<th align="left">name</th>
<th align="right">time</th>
<th align="right">numerator</th>
<th align="right">denominator</th>
<th align="right">clocks_per_click</th>
<th align="right">notated_32nd_notes_per_beat</th>
<th align="right">program</th>
<th align="right">channel</th>
<th align="right">control</th>
<th align="right">value</th>
<th align="right">note</th>
<th align="right">velocity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">track_name</td>
<td align="left">Sequenced by P.J. Barnes</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">time_signature</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">time_signature</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">program_change</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">26</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">control_change</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">50</td>
<td align="right">64</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">66</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">76</td>
<td align="right">64</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">16</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">50</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">66</td>
<td align="right">64</td>
</tr>
</tbody>
</table>
<p>MIDI files can get complicated and the functions here have been
developed with very simple MIDI files in mind.</p>
<p>A very simple MIDI file would start with a few rows of
<code>meta</code> tags that define important parameters for the MIDI
file. These can be grabbed from <code>midi_df</code> using
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_tags</span> <span class="op">&lt;-</span> <span class="va">midi_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">meta</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">meta_tags</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="2%">
<col width="8%">
<col width="14%">
<col width="2%">
<col width="5%">
<col width="7%">
<col width="10%">
<col width="16%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="3%">
<col width="2%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">i_track</th>
<th align="left">meta</th>
<th align="left">type</th>
<th align="left">name</th>
<th align="right">time</th>
<th align="right">numerator</th>
<th align="right">denominator</th>
<th align="right">clocks_per_click</th>
<th align="right">notated_32nd_notes_per_beat</th>
<th align="right">program</th>
<th align="right">channel</th>
<th align="right">control</th>
<th align="right">value</th>
<th align="right">note</th>
<th align="right">velocity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">track_name</td>
<td align="left">Sequenced by P.J. Barnes</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">time_signature</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">time_signature</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">end_of_track</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
</tbody>
</table>
<p>A few problems already to notice. First, the last row is a meta
message that belongs at the end of the track, it contains the
“end_of_track” message.</p>
<p>This message is placed correctly at the end of the example midi file.
I filtered for any rows where <code>meta == TRUE</code>, so it shows
up.</p>
<p>If we look at the tail of <code>midi_df</code>, then the last line is
a meta message with “end_of_track”.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">midi_df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="5%">
<col width="3%">
<col width="8%">
<col width="3%">
<col width="3%">
<col width="6%">
<col width="7%">
<col width="11%">
<col width="18%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="3%">
<col width="3%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">i_track</th>
<th align="left">meta</th>
<th align="left">type</th>
<th align="left">name</th>
<th align="right">time</th>
<th align="right">numerator</th>
<th align="right">denominator</th>
<th align="right">clocks_per_click</th>
<th align="right">notated_32nd_notes_per_beat</th>
<th align="right">program</th>
<th align="right">channel</th>
<th align="right">control</th>
<th align="right">value</th>
<th align="right">note</th>
<th align="right">velocity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1803</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">16</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">64</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="left">1804</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">48</td>
<td align="right">64</td>
</tr>
<tr class="odd">
<td align="left">1805</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">60</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="left">1806</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">16</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">48</td>
<td align="right">64</td>
</tr>
<tr class="odd">
<td align="left">1807</td>
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">60</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="left">1808</td>
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">end_of_track</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
</tbody>
</table>
<p>A second issue is that this particular midi file does not have a meta
message setting the midi tempo. I generated this file in ableton live,
and I guess that’s a feature of how they generate midi files. In
{midiblender} I would make a copy of midi_df, grab the meta messages,
and modify them to include the tempo message (in this case it will
default to 500000 which is 120 BPM).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">copy_midi_df</span> <span class="op">&lt;-</span> <span class="fu">midiblender</span><span class="fu">::</span><span class="fu"><a href="../reference/copy_midi_df_track.html">copy_midi_df_track</a></span><span class="op">(</span><span class="va">midi_df</span>, track <span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">meta_midi_df</span> <span class="op">&lt;-</span> <span class="fu">midiblender</span><span class="fu">::</span><span class="fu"><a href="../reference/get_midi_meta_df.html">get_midi_meta_df</a></span><span class="op">(</span><span class="va">copy_midi_df</span><span class="op">)</span></span>
<span><span class="va">meta_midi_df</span> <span class="op">&lt;-</span> <span class="fu">midiblender</span><span class="fu">:::</span><span class="fu"><a href="../reference/set_midi_tempo_meta.html">set_midi_tempo_meta</a></span><span class="op">(</span><span class="va">meta_midi_df</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">meta_midi_df</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="4%">
<col width="2%">
<col width="8%">
<col width="14%">
<col width="2%">
<col width="5%">
<col width="6%">
<col width="9%">
<col width="16%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="3%">
<col width="2%">
<col width="5%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="right">i_track</th>
<th align="left">meta</th>
<th align="left">type</th>
<th align="left">name</th>
<th align="right">time</th>
<th align="right">numerator</th>
<th align="right">denominator</th>
<th align="right">clocks_per_click</th>
<th align="right">notated_32nd_notes_per_beat</th>
<th align="right">program</th>
<th align="right">channel</th>
<th align="right">control</th>
<th align="right">value</th>
<th align="right">note</th>
<th align="right">velocity</th>
<th align="right">tempo</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">track_name</td>
<td align="left">Sequenced by P.J. Barnes</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">time_signature</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">time_signature</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">8</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">set_tempo</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5e+05</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">TRUE</td>
<td align="left">end_of_track</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
</tbody>
</table>
<p>MIDI files contain note_on and note_off messages sandwiched between
the header meta messages and the last end_of_track meta message (there
can be other kinds of messages in between too).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">note_messages</span> <span class="op">&lt;-</span> <span class="va">midi_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"note_on"</span>,<span class="st">"note_off"</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">note_messages</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="4%">
<col width="6%">
<col width="3%">
<col width="3%">
<col width="6%">
<col width="8%">
<col width="11%">
<col width="19%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="4%">
<col width="3%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">i_track</th>
<th align="left">meta</th>
<th align="left">type</th>
<th align="left">name</th>
<th align="right">time</th>
<th align="right">numerator</th>
<th align="right">denominator</th>
<th align="right">clocks_per_click</th>
<th align="right">notated_32nd_notes_per_beat</th>
<th align="right">program</th>
<th align="right">channel</th>
<th align="right">control</th>
<th align="right">value</th>
<th align="right">note</th>
<th align="right">velocity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">50</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">66</td>
<td align="right">64</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_on</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">76</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">16</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">50</td>
<td align="right">64</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">66</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">FALSE</td>
<td align="left">note_off</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">76</td>
<td align="right">64</td>
</tr>
</tbody>
</table>
<p>MIDI represents pitch in steps from 0-127, these are in the
<code>note</code> column. <code>velocity</code> controls note volume. On
a midi keyboard, every time a key is pressed down, the midi file would
record a “note_on” message. When the key is released, a “note_off”
message is recorded. These times are in the <code>time</code> column.
The time column represents messages in relative time to the last
message. The first three messages in the data frame have 0 time, which
means they get played first. Then 16 midi ticks later, the first
“note_off” message occurs. This is followed simultaneously by two more
messages, they are simultaneous because they happen with 0 time elapsing
relative to the last time stamp.</p>
<p>With these components in place some mangling can begin. As long as
the mangled results get back into this MIDI format, the result should be
be playable.</p>
</div>
</div>
<div class="section level2">
<h2 id="mangling">Mangling<a class="anchor" aria-label="anchor" href="#mangling"></a>
</h2>
<p>I’ll keep the mangling example simple here. The other vignettes will
show more complicated generative stuff and transformations involving
matrix representations.</p>
<p>Let’s use some R tricks to randomize the pitch out of this midi file.
I’d like to randomly assign new note pitch values to the existing
ones.</p>
<p>Here’s an example of why R is so fun. This takes the whole column of
note values, randomly shuffles them using <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code>, and
then puts them back in.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">note_messages</span><span class="op">$</span><span class="va">note</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">note_messages</span><span class="op">$</span><span class="va">note</span><span class="op">)</span></span></code></pre></div>
<p>Great, MIDI mangled. And, in a good mangly way. For example, this
code did not keep track pairs of note on and off messages. This means
that some notes may have “note_on” messages that don’t get turned off,
or get turned off with a long delay. This introduces random sustains to
some of the changed notes. Anyway, additional considerations are needed
to <a href="https://homophony.quest/blog/33_2_1_24_rand_mario/" class="external-link">keep it
tight</a>.</p>
<p>As an aside, so far I haven’t developed much in the way of
compositional methods, but check out the <a href="https://urswilke.github.io/pyramidi/articles/compose.html" class="external-link">pyramidi
documentation</a> for more in that direction.</p>
<p>In other vignettes, I get into a bunch of mangling that involves
converting midi into matrix representations and back. This leads to some
opportunities for probabilistic sequence generation and related
things.</p>
</div>
<div class="section level2">
<h2 id="exporting">Exporting<a class="anchor" aria-label="anchor" href="#exporting"></a>
</h2>
<p>At this point we should be good to go with exporting. The main
requirements are to reconstitute a <code>midi_df</code> data frame with
the meta headers, the modified body containing the note on and off
messages that were changed, and end it all with the end_of_track
message.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># split the meta messages into header and end, return a list with each part</span></span>
<span><span class="va">meta_df_split</span> <span class="op">&lt;-</span> <span class="fu">midiblender</span><span class="fu">::</span><span class="fu"><a href="../reference/split_meta_df.html">split_meta_df</a></span><span class="op">(</span><span class="va">meta_midi_df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># added a tempo column to the meta_midi_df earlier, </span></span>
<span><span class="co"># need to add it to the note_messages df</span></span>
<span><span class="va">note_messages</span> <span class="op">&lt;-</span> <span class="va">note_messages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>tempo <span class="op">=</span> <span class="cn">NaN</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># bind it all together</span></span>
<span><span class="va">new_midi_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">meta_df_split</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                     <span class="va">note_messages</span>,</span>
<span>                     <span class="va">meta_df_split</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>At this point the <code>new_midi_df</code> should be valid MIDI
structured as an R data.frame. The next step is to update the
<code>miditapyr_object</code> using the following method.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># update miditapyr df</span></span>
<span><span class="va">miditapyr_object</span><span class="op">$</span><span class="va">midi_frame_unnested</span><span class="op">$</span><span class="fu">update_unnested_mf</span><span class="op">(</span><span class="va">new_midi_df</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="write-midi-to-file">Write midi to file<a class="anchor" aria-label="anchor" href="#write-midi-to-file"></a>
</h3>
<p>The <code>miditapyr_object</code> is now updated with new MIDI info.
This object has a write file method to export its contents to a
file.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#write midi file to disk</span></span>
<span><span class="va">miditapyr_object</span><span class="op">$</span><span class="fu">write_file</span><span class="op">(</span><span class="st">"rando_mario.mid"</span><span class="op">)</span></span></code></pre></div>
<p>It works, very mangled, and yet somehow still recognizable as mario
music.</p>
<p><audio controls=""><source src="rando_mario.mp3" type="audio/wav"></source></audio></p>
</div>
<div class="section level3">
<h3 id="bouncing-to-mp3-with-fluid-synth">bouncing to mp3 with fluid synth<a class="anchor" aria-label="anchor" href="#bouncing-to-mp3-with-fluid-synth"></a>
</h3>
<p>It’s possible to use <a href="https://www.fluidsynth.org" class="external-link">fluid
synth</a> to record the midi file into an audio format. I won’t say much
more about that, but here’s some example code. I’m using the
<code>av</code> package to convert wav to mp3.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#########</span></span>
<span><span class="co"># bounce to mp3 with fluid synth</span></span>
<span></span>
<span><span class="va">track_name</span> <span class="op">&lt;-</span> <span class="st">"rando_mario"</span></span>
<span></span>
<span><span class="va">wav_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">track_name</span>,<span class="st">".wav"</span><span class="op">)</span></span>
<span><span class="va">midi_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">track_name</span>,<span class="st">".mid"</span><span class="op">)</span></span>
<span><span class="va">mp3_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">track_name</span>,<span class="st">".mp3"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># synthesize midi file to wav with fluid synth</span></span>
<span><span class="va">system_command</span> <span class="op">&lt;-</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">'fluidsynth -F {wav_name} ~/Library/Audio/Sounds/Banks/nintendo_soundfont.sf2 {midi_name}'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="va">system_command</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># convert wav to mp3</span></span>
<span><span class="fu">av</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/av/reference/encoding.html" class="external-link">av_audio_convert</a></span><span class="op">(</span><span class="va">wav_name</span>,<span class="va">mp3_name</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># clean up and delete wav</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">wav_name</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">wav_name</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew J. C. Crump.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
